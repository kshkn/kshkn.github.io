<aside id="sticky-sidebar" class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">{{ site.title }}</a>
      </h1>
      <p class="lead">{{ site.headline }}</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="#discography">Discography</a>
      <a class="sidebar-nav-item" href="https://github.com/kshkn/lyrics" target="_blank">Lyrics</a>
      <a class="sidebar-nav-item" href="#follow">Follow</a>
    </nav>
  </div>
</aside>

<nav class="navbar navbar-expand-md navbar-dark bg-dark main-nav py-2">
  <div class="container">
    <span class="navbar-brand">
      <img alt="koshkamoroshka" src="https://koshkamoroshka.com/img/cloudberry.png" />koshkamoroshka
    </span>

    <div class="navbar-links-menu">
      <button id="navbar-menu-button" aria-label="Nav menu" class="navbar-menu-button" aria-haspopup="menu"
        aria-expanded="false" aria-controls="navbar-menu-contents">
        <span class="navbar-menu-burger"></span>
      </button>
      <div class="navbar-menu-contents" id="navbar-menu-contents" role="menu" aria-orientation="vertical">
        <a class="navbar-menu-item-link" role="menuitem" href="/live">live</a>
        <a class="navbar-menu-item-link" role="menuitem" href="/repertoire/All">repertoire</a>
        <a class="navbar-menu-item-link" role="menuitem" href="/archive/recent">archive</a>
      </div>
    </div>

    <div class="collapse navbar-collapse" id="navbarMainLinks">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link" href="/live">live</a></li>
        <li class="nav-item">
          <a class="nav-link" href="/repertoire/All">repertoire</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/archive/recent">archive</a>
        </li>
      </ul>
    </div>
  </div>
  <script>
    (function () {
      const menuButton = document.getElementById("navbar-menu-button");

      const handleOutsideClick = (e) => {
        const closestMenu = e.target.closest(".navbar-links-menu");

        if (!closestMenu) {
          menuButton.setAttribute("aria-expanded", "false");
        }
      };

      menuButton.addEventListener("click", (e) => {
        const currentNode = e.currentTarget;
        const expandedValue = currentNode.getAttribute("aria-expanded");

        if (expandedValue === "true") {
          currentNode.setAttribute("aria-expanded", "false");

          window.removeEventListener("click", handleOutsideClick);
        } else {
          currentNode.setAttribute("aria-expanded", "true");

          window.addEventListener("click", handleOutsideClick);
        }

        currentNode.blur();
      });
    })();
  </script>
</nav>
